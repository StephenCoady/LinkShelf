<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LinkShelf</title>
    <link rel="stylesheet" href="dashboard.css">
</head>
<body class="dashboard loading">
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="header-left">
                <h1 class="logo">
                    <img src="icons/logo-large-white.png" alt="LinkShelf" class="logo-image">
                </h1>
            </div>
            <div class="header-search">
                <div class="search-container">
                    <input type="text" id="global-search" class="search-input" placeholder="Search bookmarks... (Press / to focus)" autocomplete="off">
                    <button id="search-clear" class="search-clear hidden" title="Clear search">
                        ✕
                    </button>
                </div>
            </div>
            <div class="header-actions">
                <button id="create-category-btn" class="btn btn-primary">+ Create Category</button>
                <div class="shelf-selector">
                    <button id="shelf-selector-btn" class="btn btn-secondary" title="Select Shelf">
                        <span id="current-shelf-name">Main</span> <img src="icons/app_icons/down-white.png" alt="Dropdown" class="dropdown-icon">
                    </button>
                    <div id="shelf-selector-dropdown" class="shelf-selector-dropdown">
                        <!-- Shelf options will be dynamically inserted here -->
                    </div>
                </div>
                <button id="settings-btn" class="btn btn-secondary"><img src="icons/app_icons/settings-white.png" alt="Settings" class="btn-icon"> Settings</button>
            </div>
        </div>
    </header>

    <!-- Sidebar Toggle Button (always visible) -->
    <button id="sidebar-toggle" class="sidebar-toggle" title="Toggle Inbox">
        ☰
    </button>

    <!-- Inbox Sidebar -->
    <aside id="inbox-sidebar" class="inbox-sidebar">
        <div class="inbox-panel">
            <div class="inbox-header">
                <h3>Inbox</h3>
                <span class="inbox-count" id="inbox-count">0</span>
            </div>
            <div class="inbox-content" id="inbox-content">
                <!-- Inbox items will be dynamically inserted here -->
            </div>
        </div>
    </aside>

    <!-- Main Dashboard -->
    <main class="dashboard">
        <!-- Favourites Bar -->
        <div id="favourites-bar" class="favourites-bar hidden">
            <!-- Favourites content will be dynamically inserted here -->
        </div>
        
        <div id="categories-container" class="categories-container">
            <!-- Categories will be dynamically inserted here -->
        </div>
    </main>

    <!-- Create Category Modal -->
    <div id="create-category-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="create-category-modal-title">Create New Category</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="create-category-form">
                    <div class="form-group">
                        <label for="category-name">Category Name</label>
                        <input type="text" id="category-name" name="categoryName" placeholder="Enter category name" required>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="cancel-category">Cancel</button>
                        <button type="submit" class="btn btn-primary" id="save-category">Create Category</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add/Edit Bookmark Modal -->
    <div id="bookmark-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="bookmark-modal-title">Add New Bookmark</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="bookmark-form">
                    <div class="form-group">
                        <label for="bookmark-url">URL</label>
                        <input type="text" id="bookmark-url" name="bookmarkUrl" placeholder="example.com (https:// will be added automatically)" required>
                    </div>
                    <div class="form-group">
                        <label for="bookmark-name">Name</label>
                        <input type="text" id="bookmark-name" name="bookmarkName" placeholder="Bookmark name" required>
                    </div>
                    <div class="form-group">
                        <label for="bookmark-favicon-url">Custom Favicon URL (optional)</label>
                        <input type="text" id="bookmark-favicon-url" name="bookmarkFaviconUrl" placeholder="example.com/icon.png (optional)">
                        <small class="form-help">Leave blank to auto-detect favicon. Useful for VPN/internal sites.</small>
                    </div>
                    <div class="form-group">
                        <div class="bookmark-preview">
                            <img id="bookmark-favicon" class="bookmark-favicon-preview" src="" alt="Favicon">
                            <span id="bookmark-title-preview"></span>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="cancel-bookmark">Cancel</button>
                        <button type="button" class="btn btn-danger hidden" id="delete-bookmark">Delete Bookmark</button>
                        <button type="submit" class="btn btn-primary" id="save-bookmark">Save Bookmark</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>Settings</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h4>Layout</h4>
                    <div class="form-group">
                        <label for="column-count">Number of Columns (1-5)</label>
                        <select id="column-count" name="columnCount">
                            <option value="1">1 Column</option>
                            <option value="2">2 Columns</option>
                            <option value="3">3 Columns</option>
                            <option value="4" selected>4 Columns</option>
                            <option value="5">5 Columns</option>
                        </select>
                    </div>
                </div>
                <div class="settings-section">
                    <h4>Favourites</h4>
                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" id="show-favourites" name="showFavourites" checked>
                            <label for="show-favourites">Show favourites bar</label>
                        </div>
                        <small class="form-help">Display a horizontal bar of favourite links above your categories</small>
                    </div>
                </div>
                <div class="settings-section">
                    <h4>Link Behavior</h4>
                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" id="open-links-new-tab" name="openLinksInNewTab" checked>
                            <label for="open-links-new-tab">Open links in new tab</label>
                        </div>
                        <small class="form-help">When enabled, all bookmark and favourite links will open in a new tab</small>
                    </div>
                </div>
                <div class="settings-section">
                    <h4>Import / Export</h4>
                    <div class="form-actions">
                        <button id="export-bookmarks" class="btn btn-primary">Export to JSON</button>
                        <button id="export-netscape" class="btn btn-primary">Export to HTML</button>
                        <input type="file" id="import-file" accept=".html,.json" style="display: none;">
                        <button id="import-bookmarks" class="btn btn-secondary">Import Bookmarks</button>
                        <button id="import-papaly" class="btn btn-secondary">Import from Papaly</button>
                    </div>
                    <div class="form-help-group">
                        <small class="form-help"><strong>JSON Export:</strong> Full LinkShelf format with all features (subcategories, favorites, settings)</small>
                        <small class="form-help"><strong>HTML Export:</strong> Standard Netscape format for importing into browsers</small>
                        <small class="form-help"><strong>Import Bookmarks:</strong> Auto-detects JSON (LinkShelf) or HTML (browser bookmarks)</small>
                        <small class="form-help"><strong>Import from Papaly:</strong> Specifically for Papaly bookmark board exports</small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmation-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h3 id="confirmation-title">Confirm Action</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p id="confirmation-message">Are you sure you want to proceed?</p>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="confirmation-cancel">Cancel</button>
                    <button type="button" class="btn btn-danger" id="confirmation-confirm">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Create/Edit Shelf Modal -->
    <div id="shelf-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="shelf-modal-title">Create New Shelf</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="shelf-form">
                    <div class="form-group">
                        <label for="shelf-name">Shelf Name</label>
                        <input type="text" id="shelf-name" name="shelfName" placeholder="Enter shelf name" required>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="cancel-shelf">Cancel</button>
                        <button type="button" class="btn btn-danger hidden" id="delete-shelf">Delete Shelf</button>
                        <button type="submit" class="btn btn-primary" id="save-shelf">Create Shelf</button>
                    </div>
                </form>
            </div>
        </div>
    </div>



    <!-- Add/Edit Favourite Modal -->
    <div id="favourite-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="favourite-modal-title">Add Favourite</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="favourite-form">
                    <div class="form-group">
                        <label for="favourite-url">URL</label>
                        <input type="text" id="favourite-url" name="url" placeholder="example.com (https:// will be added automatically)" required>
                        <div id="favourite-url-status" class="url-status"></div>
                    </div>
                    <div class="form-group">
                        <label for="favourite-favicon">Custom Favicon URL (Optional)</label>
                        <input type="text" id="favourite-favicon" name="favicon" placeholder="example.com/favicon.ico (optional)">
                        <small class="form-help">Leave blank to auto-detect favicon from the website</small>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="cancel-favourite">Cancel</button>
                        <button type="button" class="btn btn-danger hidden" id="delete-favourite">Delete Favourite</button>
                        <button type="submit" class="btn btn-primary" id="save-favourite">Save Favourite</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container">
        <!-- Toast notifications will be dynamically inserted here -->
    </div>

    <script src="dashboard.js"></script>
</body>
</html>
